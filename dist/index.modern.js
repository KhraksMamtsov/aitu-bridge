function e(e,t){const o=function(){const e={current:0,next(){return++this.current}},t={};return{add(o,n){const s=null!=n?n:e.next();return t[s]=o,s},resolve(e,o,n,s){const r=t[e];r&&(n(s)?r.resolve(o):r.reject(s),t[e]=null)}}}();return t(e=>{if(e.detail&&"reqId"in e.detail){const{reqId:t,data:n,error:s}=e.detail;t&&o.resolve(t,n,e=>!e,s)}}),function(...t){return new Promise((n,s)=>{const r=o.add({resolve:n,reject:s});e(r,...t)})}}const t=new URLSearchParams(window.location.search).get("__aitu-domain");let o=null;t&&(o={origin:t,execute:(e,t,...n)=>{window.top.postMessage({source:"aitu-bridge",method:e,reqId:t,payload:n},o.origin)}},window.addEventListener("message",e=>{e.origin===t&&e.data&&window.dispatchEvent(new CustomEvent("aituEvents",{detail:e.data}))}));var n,s,r=o;!function(e){e.getMe="GetMe",e.getPhone="GetPhone",e.getContacts="GetContacts",e.getUserProfile="GetUserProfile",e.enableNotifications="AllowNotifications",e.disableNotifications="DisableNotifications"}(n||(n={})),function(e){e.Search="Search",e.ShoppingCart="ShoppingCart",e.Menu="Menu",e.Share="Share",e.Notifications="Notifications",e.Help="Help",e.Error="Error",e.Person="Person",e.Sort="Sort",e.Filter="Filter"}(s||(s={}));const i="undefined"!=typeof window&&window.AndroidBridge,a="undefined"!=typeof window&&window.webkit&&window.webkit.messageHandlers,d="undefined"!=typeof window&&window.top!==window&&r,c=(()=>{const t=[];"undefined"!=typeof window&&window.addEventListener("aituEvents",e=>{[...t].map(t=>t.call(null,e))});const o=e=>{t.push(e)},s=function(e,t){const o=function(){const e={current:0,next(){return++this.current}},t={};return{add(o,n){const s=null!=n?n:e.next();return t[s]=o,s},resolve(e,o,n,s){const r=t[e];r&&(n(s)?r.resolve(o):r.reject(s),t[e]=null)}}}();return t(e=>{if(e.detail&&"reqId"in e.detail){const{reqId:t,data:n,error:s}=e.detail;t&&o.resolve(t,n,e=>!e,s)}}),function(e,t={}){return new Promise((n,s)=>{((e,t,o={})=>{const n=a&&a.invoke;i&&i.invoke?i.invoke(e,t,JSON.stringify(o)):n?a.invoke.postMessage({reqId:e,method:t,data:o}):d?d.execute("invoke",e,o):"undefined"!=typeof window&&console.log("--invoke-isUnknown")})(o.add({resolve:n,reject:s},t.reqId),e,t)})}}(0,o),r=function(e,t){const o=function(){const e={current:0,next(){return++this.current}},t={};return{add(o,n){const s="s"+(null!=n?n:e.next());return t[s]=o,s},resolve(e,o,n,s){const r=t[e];r&&(n(s)?r.resolve(o):r.reject(s),t[e]=null)}}}();return t(e=>{if(e.detail&&"reqId"in e.detail){const{reqId:t,data:n,error:s}=e.detail;t&&o.resolve(t,n,e=>!e,s)}}),{setItem:(t,n)=>new Promise((s,r)=>{const i=o.add({resolve:s,reject:r});e(i,"setItem",{keyName:t,keyValue:n})}),getItem:t=>new Promise((n,s)=>{const r=o.add({resolve:n,reject:s});e(r,"getItem",{keyName:t})}),clear:()=>new Promise((t,n)=>{const s=o.add({resolve:t,reject:n});e(s,"clear",{})})}}((e,t,o={})=>{const n=a&&a.storage;i&&i.storage?i.storage(e,t,JSON.stringify(o)):n?a.storage.postMessage({reqId:e,method:t,data:o}):d?d.execute("storage",e,{method:t,data:o}):"undefined"!=typeof window&&console.log("--storage-isUnknown")},o),c=e(e=>{const t=a&&a.getGeo;i&&i.getGeo?i.getGeo(e):t?a.getGeo.postMessage({reqId:e}):d?d.execute("getGeo",e):"undefined"!=typeof window&&console.log("--getGeo-isUnknown")},o),l=e(e=>{const t=a&&a.getQr;i&&i.getQr?i.getQr(e):t?a.getQr.postMessage({reqId:e}):d?d.execute("getQr",e):"undefined"!=typeof window&&console.log("--getQr-isUnknown")},o),u=e(e=>{const t=a&&a.getSMSCode;i&&i.getSMSCode?i.getSMSCode(e):t?a.getSMSCode.postMessage({reqId:e}):d?d.execute("getSMSCode",e):"undefined"!=typeof window&&console.log("--getSMSCode-isUnknown")},o),w=e(e=>{const t=a&&a.selectContact;i&&i.selectContact?i.selectContact(e):t?a.selectContact.postMessage({reqId:e}):d?d.execute("selectContact",e):"undefined"!=typeof window&&console.log("--selectContact-isUnknown")},o),g=e(e=>{const t=a&&a.openSettings;i&&i.openSettings?i.openSettings(e):t?a.openSettings.postMessage({reqId:e}):d?d.execute("openSettings",e):"undefined"!=typeof window&&console.log("--openSettings-isUnknown")},o),p=e(e=>{const t=a&&a.closeApplication;i&&i.closeApplication?i.closeApplication(e):t?a.closeApplication.postMessage({reqId:e}):d?d.execute("closeApplication",e):"undefined"!=typeof window&&console.log("--closeApplication-isUnknown")},o),f=e((e,t)=>{const o=a&&a.share;i&&i.share?i.share(e,t):o?a.share.postMessage({reqId:e,text:t}):d?d.execute("share",e,{text:t}):"undefined"!=typeof window&&console.log("--share-isUnknown")},o),k=e((e,t)=>{const o=a&&a.setTitle;i&&i.setTitle?i.setTitle(e,t):o?a.setTitle.postMessage({reqId:e,text:t}):d?d.execute("setTitle",e,{text:t}):"undefined"!=typeof window&&console.log("--setTitle-isUnknown")},o),C=e((e,t)=>{const o=a&&a.copyToClipboard;i&&i.copyToClipboard?i.copyToClipboard(e,t):o?a.copyToClipboard.postMessage({reqId:e,text:t}):d?d.execute("copyToClipboard",e,{text:t}):"undefined"!=typeof window&&console.log("--copyToClipboard-isUnknown")},o),m=e((e,t,o)=>{const n=i&&i.shareFile,s=a&&a.shareFile,r="image."+o.split(";")[0].split("/")[1],c=o.substr(o.indexOf(",")+1);n?i.shareFile(e,t,r,c):s?a.shareFile.postMessage({reqId:e,text:t,filename:r,base64Data:c}):d?d.execute("shareFile",e,{text:t,filename:r,base64Data:c}):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},o),b=e((e,t,o,n)=>{const s=a&&a.shareFile;i&&i.shareFile?i.shareFile(e,t,o,n):s?a.shareFile.postMessage({reqId:e,text:t,filename:o,base64Data:n}):d?d.execute("shareFile",e,{text:t,filename:o,base64Data:n}):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},o),M=e((e,t)=>{if(!Array.isArray(t)||t.some(e=>e<1||e!==Math.floor(e))||t.reduce((e,t)=>e+t)>1e4)return void console.error("Pattern should be an array of positive integers no longer than 10000ms total");const o=a&&a.vibrate;i&&i.vibrate?i.vibrate(e,JSON.stringify(t)):o?a.vibrate.postMessage({reqId:e,pattern:t}):d?d.execute("vibrate",e,{pattern:t}):"undefined"!=typeof window&&console.log("--vibrate-isUnknown")},o),S=e(e=>{const t=a&&a.enableScreenCapture;i&&i.enableScreenCapture?i.enableScreenCapture(e):t?a.enableScreenCapture.postMessage({reqId:e}):d?d.execute("enableScreenCapture",e):"undefined"!=typeof window&&console.log("--enableScreenCapture-isUnknown")},o),h=e(e=>{const t=a&&a.disableScreenCapture;i&&i.disableScreenCapture?i.disableScreenCapture(e):t?a.disableScreenCapture.postMessage({reqId:e}):d?d.execute("disableScreenCapture",e):"undefined"!=typeof window&&console.log("--disableScreenCapture-isUnknown")},o),y=e((e,t)=>{if(t.length>3)return void console.error("SetHeaderMenuItems: items count should not be more than 3");const o=i&&i.setHeaderMenuItems,n=a&&a.setHeaderMenuItems,s=JSON.stringify(t);o?i.setHeaderMenuItems(e,s):n?a.setHeaderMenuItems.postMessage({reqId:e,itemsJsonArray:s}):d?d.execute("setHeaderMenuItems",e,{itemsJsonArray:s}):"undefined"!=typeof window&&console.log("--setHeaderMenuItems-isUnknown")},o),A=e((e,t)=>{const o=a&&a.setCustomBackArrowMode;i&&i.setCustomBackArrowMode?i.setCustomBackArrowMode(e,t):o?a.setCustomBackArrowMode.postMessage({reqId:e,enabled:t}):d?d.execute("setCustomBackArrowMode",e,{enabled:t}):"undefined"!=typeof window&&console.log("--setCustomBackArrowMode-isUnknown")},o),v=e(e=>{const t=a&&a.getCustomBackArrowMode;i&&i.getCustomBackArrowMode?i.getCustomBackArrowMode(e):t?a.getCustomBackArrowMode.postMessage({reqId:e}):d?d.execute("getCustomBackArrowMode",e):"undefined"!=typeof window&&console.log("--getCustomBackArrowMode-isUnknown")},o),I=e((e,t)=>{const o=a&&a.setCustomBackArrowVisible;i&&i.setCustomBackArrowVisible?i.setCustomBackArrowVisible(e,t):o?a.setCustomBackArrowVisible.postMessage({reqId:e,visible:t}):d?d.execute("setCustomBackArrowVisible",e,{visible:t}):"undefined"!=typeof window&&console.log("--setCustomBackArrowVisible-isUnknown")},o);return{version:String("0.2.20"),copyToClipboard:C,invoke:s,storage:r,getMe:()=>s(n.getMe),getPhone:()=>s(n.getPhone),getContacts:()=>s(n.getContacts),getGeo:c,getQr:l,getSMSCode:u,getUserProfile:e=>s(n.getUserProfile,{id:e}),selectContact:w,enableNotifications:()=>s(n.enableNotifications),disableNotifications:()=>s(n.disableNotifications),openSettings:g,closeApplication:p,setTitle:k,share:f,shareImage:m,shareFile:b,setShakeHandler:e=>{i&&i.setShakeHandler||a&&a.setShakeHandler||d?window.onAituBridgeShake=e:"undefined"!=typeof window&&console.log("--setShakeHandler-isUnknown")},setTabActiveHandler:e=>{i&&i.setTabActiveHandler||a&&a.setTabActiveHandler||d?window.onAituBridgeTabActive=e:"undefined"!=typeof window&&console.log("--setTabActiveHandler-isUnknown")},vibrate:M,isSupported:()=>{const e=a&&window.webkit.messageHandlers.invoke;return Boolean(i||e||d)},supports:e=>i&&"function"==typeof i[e]||a&&a[e]&&"function"==typeof a[e].postMessage||d&&"function"==typeof d[e],sub:o,enableScreenCapture:S,disableScreenCapture:h,setHeaderMenuItems:y,setHeaderMenuItemClickHandler:e=>{i&&i.setHeaderMenuItemClickHandler||a&&a.setHeaderMenuItemClickHandler||d?window.onAituBridgeHeaderMenuItemClick=e:"undefined"!=typeof window&&console.log("--setHeaderMenuItemClickHandler-isUnknown")},setCustomBackArrowMode:A,getCustomBackArrowMode:v,setCustomBackArrowVisible:I,setCustomBackArrowOnClickHandler:e=>{i&&i.setCustomBackArrowOnClickHandler||a&&a.setCustomBackArrowOnClickHandler||d?window.onAituBridgeBackArrowClick=e:"undefined"!=typeof window&&console.log("--setCustomBackArrowOnClickHandler-isUnknown")}}})();export default c;export{s as HeaderMenuIcon};
//# sourceMappingURL=index.modern.js.map
