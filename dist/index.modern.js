function e(e){const o=function(e="m:"){return{current:0,next(){return e+ ++this.current}}}(e),t={};return{add(e,n=""){const s=n+o.next();return t[s]=e,s},resolve(e,o,n,s){const i=t[e];i&&(n(s)?i.resolve(o):i.reject(s),t[e]=null)}}}function o(e,o){e(e=>{if(e.detail&&"reqId"in e.detail){const{reqId:t,data:n,error:s}=e.detail;t&&o.resolve(t,n,e=>!e,s)}})}function t(t,n,s){const i=e(n+":");return o(s,i),function(...e){return new Promise((o,n)=>{const s=i.add({resolve:o,reject:n});t(s,...e)})}}const n=new URLSearchParams(window.location.search).get("__aitu-domain");let s=null;n&&(s={origin:n,execute:(e,o,...t)=>{window.top.postMessage({source:"aitu-bridge",method:e,reqId:o,payload:[...t]},s.origin)}},window.addEventListener("message",e=>{e.origin===n&&e.data&&window.dispatchEvent(new CustomEvent("aituEvents",{detail:e.data}))}));var i,r,a=s;console.log("%c"+(new Date).toISOString().slice(11)+"%c LOCAL BRIDGE %c HELLO!","color: white; font-weight: bold; background: BlueViolet","color: magenta","color: lime"),function(e){e.getMe="GetMe",e.getPhone="GetPhone",e.getContacts="GetContacts",e.getUserProfile="GetUserProfile",e.enableNotifications="AllowNotifications",e.disableNotifications="DisableNotifications"}(i||(i={})),function(e){e.Search="Search",e.ShoppingCart="ShoppingCart",e.Menu="Menu",e.Share="Share",e.Notifications="Notifications",e.Help="Help",e.Error="Error",e.Person="Person",e.Sort="Sort",e.Filter="Filter"}(r||(r={}));const d="undefined"!=typeof window&&window.AndroidBridge,c="undefined"!=typeof window&&window.webkit&&window.webkit.messageHandlers,l="undefined"!=typeof window&&window.top!==window&&a,u=(()=>{const n=[];"undefined"!=typeof window&&window.addEventListener("aituEvents",e=>{[...n].map(o=>o.call(null,e))});const s=e=>{n.push(e)},r=function(t,n){const s=e("invoke:");return o(n,s),function(e,o={}){return new Promise((t,n)=>{((e,o,t={})=>{const n=c&&c.invoke;d&&d.invoke?d.invoke(e,o,JSON.stringify(t)):n?c.invoke.postMessage({reqId:e,method:o,data:t}):l?l.execute("invoke",e,o,t):"undefined"!=typeof window&&console.log("--invoke-isUnknown")})(s.add({resolve:t,reject:n},e+":"),e,o)})}}(0,s),a=function(t,n){const s=e("storage:");return o(n,s),{setItem:(e,o)=>new Promise((n,i)=>{const r=s.add({resolve:n,reject:i});t(r,"setItem",{keyName:e,keyValue:o})}),getItem:e=>new Promise((o,n)=>{const i=s.add({resolve:o,reject:n});t(i,"getItem",{keyName:e})}),clear:()=>new Promise((e,o)=>{const n=s.add({resolve:e,reject:o});t(n,"clear",{})})}}((e,o,t={})=>{const n=c&&c.storage;d&&d.storage?d.storage(e,o,JSON.stringify(t)):n?c.storage.postMessage({reqId:e,method:o,data:t}):l?l.execute("storage",e,o,t):"undefined"!=typeof window&&console.log("--storage-isUnknown")},s),u=t(e=>{const o=c&&c.getGeo;d&&d.getGeo?d.getGeo(e):o?c.getGeo.postMessage({reqId:e}):l?l.execute("getGeo",e):"undefined"!=typeof window&&console.log("--getGeo-isUnknown")},"getGeo",s),w=t(e=>{const o=c&&c.getQr;d&&d.getQr?d.getQr(e):o?c.getQr.postMessage({reqId:e}):l?l.execute("getQr",e):"undefined"!=typeof window&&console.log("--getQr-isUnknown")},"getQr",s),g=t(e=>{const o=c&&c.getSMSCode;d&&d.getSMSCode?d.getSMSCode(e):o?c.getSMSCode.postMessage({reqId:e}):l?l.execute("getSMSCode",e):"undefined"!=typeof window&&console.log("--getSMSCode-isUnknown")},"getSMSCode",s),p=t(e=>{const o=c&&c.selectContact;d&&d.selectContact?d.selectContact(e):o?c.selectContact.postMessage({reqId:e}):l?l.execute("selectContact",e):"undefined"!=typeof window&&console.log("--selectContact-isUnknown")},"selectContact",s),f=t(e=>{const o=c&&c.openSettings;d&&d.openSettings?d.openSettings(e):o?c.openSettings.postMessage({reqId:e}):l?l.execute("openSettings",e):"undefined"!=typeof window&&console.log("--openSettings-isUnknown")},"openSettings",s),C=t(e=>{const o=c&&c.closeApplication;d&&d.closeApplication?d.closeApplication(e):o?c.closeApplication.postMessage({reqId:e}):l?l.execute("closeApplication",e):"undefined"!=typeof window&&console.log("--closeApplication-isUnknown")},"closeApplication",s),k=t((e,o)=>{const t=c&&c.share;d&&d.share?d.share(e,o):t?c.share.postMessage({reqId:e,text:o}):l?l.execute("share",e,o):"undefined"!=typeof window&&console.log("--share-isUnknown")},"share",s),m=t((e,o)=>{const t=c&&c.setTitle;d&&d.setTitle?d.setTitle(e,o):t?c.setTitle.postMessage({reqId:e,text:o}):l?l.execute("setTitle",e,o):"undefined"!=typeof window&&console.log("--setTitle-isUnknown")},"setTitle",s),b=t((e,o)=>{const t=c&&c.copyToClipboard;d&&d.copyToClipboard?d.copyToClipboard(e,o):t?c.copyToClipboard.postMessage({reqId:e,text:o}):l?l.execute("copyToClipboard",e,o):"undefined"!=typeof window&&console.log("--copyToClipboard-isUnknown")},"copyToClipboard",s),M=t((e,o,t)=>{const n=d&&d.shareFile,s=c&&c.shareFile,i="image."+t.split(";")[0].split("/")[1],r=t.substr(t.indexOf(",")+1);n?d.shareFile(e,o,i,r):s?c.shareFile.postMessage({reqId:e,text:o,filename:i,base64Data:r}):l?l.execute("shareFile",e,{text:o,filename:i,base64Data:r}):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},"shareImage",s),S=t((e,o,t,n)=>{const s=c&&c.shareFile;d&&d.shareFile?d.shareFile(e,o,t,n):s?c.shareFile.postMessage({reqId:e,text:o,filename:t,base64Data:n}):l?l.execute("shareFile",e,o,t,n):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},"shareFile",s),h=t((e,o)=>{if(!Array.isArray(o)||o.some(e=>e<1||e!==Math.floor(e))||o.reduce((e,o)=>e+o)>1e4)return void console.error("Pattern should be an array of positive integers no longer than 10000ms total");const t=c&&c.vibrate;d&&d.vibrate?d.vibrate(e,JSON.stringify(o)):t?c.vibrate.postMessage({reqId:e,pattern:o}):l?l.execute("vibrate",e,o):"undefined"!=typeof window&&console.log("--vibrate-isUnknown")},"vibrate",s),A=t(e=>{const o=c&&c.enableScreenCapture;d&&d.enableScreenCapture?d.enableScreenCapture(e):o?c.enableScreenCapture.postMessage({reqId:e}):l?l.execute("enableScreenCapture",e):"undefined"!=typeof window&&console.log("--enableScreenCapture-isUnknown")},"enableScreenCapture",s),y=t(e=>{const o=c&&c.disableScreenCapture;d&&d.disableScreenCapture?d.disableScreenCapture(e):o?c.disableScreenCapture.postMessage({reqId:e}):l?l.execute("disableScreenCapture",e):"undefined"!=typeof window&&console.log("--disableScreenCapture-isUnknown")},"disableScreenCapture",s),I=t((e,o)=>{if(o.length>3)return void console.error("SetHeaderMenuItems: items count should not be more than 3");const t=d&&d.setHeaderMenuItems,n=c&&c.setHeaderMenuItems,s=JSON.stringify(o);t?d.setHeaderMenuItems(e,s):n?c.setHeaderMenuItems.postMessage({reqId:e,itemsJsonArray:s}):l?l.execute("setHeaderMenuItems",e,s):"undefined"!=typeof window&&console.log("--setHeaderMenuItems-isUnknown")},"setHeaderMenuItems",s),v=t((e,o)=>{const t=c&&c.setCustomBackArrowMode;d&&d.setCustomBackArrowMode?d.setCustomBackArrowMode(e,o):t?c.setCustomBackArrowMode.postMessage({reqId:e,enabled:o}):l?l.execute("setCustomBackArrowMode",e,o):"undefined"!=typeof window&&console.log("--setCustomBackArrowMode-isUnknown")},"setCustomBackArrowMode",s),B=t(e=>{const o=c&&c.getCustomBackArrowMode;d&&d.getCustomBackArrowMode?d.getCustomBackArrowMode(e):o?c.getCustomBackArrowMode.postMessage({reqId:e}):l?l.execute("getCustomBackArrowMode",e):"undefined"!=typeof window&&console.log("--getCustomBackArrowMode-isUnknown")},"getCustomBackArrowMode",s),H=t((e,o)=>{const t=c&&c.setCustomBackArrowVisible;d&&d.setCustomBackArrowVisible?d.setCustomBackArrowVisible(e,o):t?c.setCustomBackArrowVisible.postMessage({reqId:e,visible:o}):l?l.execute("setCustomBackArrowVisible",e,o):"undefined"!=typeof window&&console.log("--setCustomBackArrowVisible-isUnknown")},"setCustomBackArrowVisible",s);return{version:String("0.2.20"),copyToClipboard:b,invoke:r,storage:a,getMe:()=>r(i.getMe),getPhone:()=>r(i.getPhone),getContacts:()=>r(i.getContacts),getGeo:u,getQr:w,getSMSCode:g,getUserProfile:e=>r(i.getUserProfile,{id:e}),selectContact:p,enableNotifications:()=>r(i.enableNotifications),disableNotifications:()=>r(i.disableNotifications),openSettings:f,closeApplication:C,setTitle:m,share:k,shareImage:M,shareFile:S,setShakeHandler:e=>{d&&d.setShakeHandler||c&&c.setShakeHandler||l?window.onAituBridgeShake=e:"undefined"!=typeof window&&console.log("--setShakeHandler-isUnknown")},setTabActiveHandler:e=>{d&&d.setTabActiveHandler||c&&c.setTabActiveHandler||l?window.onAituBridgeTabActive=e:"undefined"!=typeof window&&console.log("--setTabActiveHandler-isUnknown")},vibrate:h,isSupported:()=>{const e=c&&window.webkit.messageHandlers.invoke;return Boolean(d||e||l)},supports:e=>d&&"function"==typeof d[e]||c&&c[e]&&"function"==typeof c[e].postMessage||l&&"function"==typeof l[e],sub:s,enableScreenCapture:A,disableScreenCapture:y,setHeaderMenuItems:I,setHeaderMenuItemClickHandler:e=>{d&&d.setHeaderMenuItemClickHandler||c&&c.setHeaderMenuItemClickHandler||l?window.onAituBridgeHeaderMenuItemClick=e:"undefined"!=typeof window&&console.log("--setHeaderMenuItemClickHandler-isUnknown")},setCustomBackArrowMode:v,getCustomBackArrowMode:B,setCustomBackArrowVisible:H,setCustomBackArrowOnClickHandler:e=>{d&&d.setCustomBackArrowOnClickHandler||c&&c.setCustomBackArrowOnClickHandler||l?window.onAituBridgeBackArrowClick=e:"undefined"!=typeof window&&console.log("--setCustomBackArrowOnClickHandler-isUnknown")}}})();export default u;export{r as HeaderMenuIcon};
//# sourceMappingURL=index.modern.js.map
