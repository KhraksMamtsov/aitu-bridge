{"version":3,"file":"index.js","sources":["../src/utils.ts","../src/webBridge.ts","../src/index.ts","../src/version.ts"],"sourcesContent":["function createCounter(prefix = 'm:') {\n    return {\n        current: 0,\n        next() {\n            return prefix + ++this.current;\n        },\n    };\n}\n\nfunction createRequestResolver(prefix: string) {\n    type PromiseController = {\n        resolve: (value: any) => any;\n        reject: (reason: any) => any;\n    };\n\n    const counter = createCounter(prefix);\n    const promiseControllers: Record<string, PromiseController | null> = {};\n\n    return {\n        add(controller: PromiseController, customId = ''): number | string {\n            const id = customId + counter.next()\n            promiseControllers[id] = controller;\n            return id;\n        },\n\n        resolve<T>(reqId: number | string, data: T, isSuccess: (data: T) => boolean, error: any) {\n            const requestPromise = promiseControllers[reqId];\n\n            if (requestPromise) {\n                if (isSuccess(error)) {\n                    requestPromise.resolve(data);\n                } else {\n                    requestPromise.reject(error);\n                }\n\n                promiseControllers[reqId] = null;\n            }\n        },\n    };\n}\n\nfunction handleSubscribe(subscribe: (handler: (event: any) => void) => void, requestResolver: ReturnType<typeof createRequestResolver>) {\n    subscribe(event => {\n        if (!event.detail) {\n            return;\n        }\n\n        if ('reqId' in event.detail) {\n            const { reqId, data, error } = event.detail;\n\n            if (reqId) {\n                requestResolver.resolve(reqId, data, (error) => !(error), error);\n            }\n        }\n    })\n}\n\nexport function promisifyStorage(storage, subscribe: (fn: any) => void) {\n    const requestResolver = createRequestResolver('storage:');\n\n    handleSubscribe(subscribe, requestResolver)\n\n    return {\n        setItem: (keyName: string, keyValue: string): Promise<void> => {\n            return new Promise((resolve, reject) => {\n                const reqId = requestResolver.add({ resolve, reject });\n                storage(reqId, 'setItem', { keyName, keyValue });\n            });\n        },\n        getItem: (keyName: string): Promise<string | null> => {\n            return new Promise((resolve, reject) => {\n                const reqId = requestResolver.add({ resolve, reject });\n                storage(reqId, 'getItem', { keyName });\n            });\n        },\n        clear: (): Promise<void> => {\n            return new Promise((resolve, reject) => {\n                const reqId = requestResolver.add({ resolve, reject });\n                storage(reqId, 'clear', {});\n            });\n        },\n    }\n}\n\nexport function promisifyInvoke(invoke, subscribe: (fn: any) => void) {\n    const requestResolver = createRequestResolver('invoke:');\n\n    handleSubscribe(subscribe, requestResolver)\n\n    return function promisifiedFunc(invokeMethodName: string, props: any = {}): Promise<any | void> {\n        return new Promise((resolve, reject) => {\n            const reqId = requestResolver.add({ resolve, reject }, invokeMethodName + ':');\n\n            invoke(reqId, invokeMethodName, props);\n        });\n    };\n}\n\nexport function promisifyMethod(method: Function, methodName: string, subscribe: (fn: any) => void) {\n    const requestResolver = createRequestResolver(methodName + ':');\n\n    handleSubscribe(subscribe, requestResolver)\n\n    return function promisifiedFunc(...args: any[]): Promise<any | void> {\n        return new Promise((resolve, reject) => {\n            const reqId = requestResolver.add({ resolve, reject });\n            method(reqId, ...args);\n        });\n    };\n}\n\n\n\n","import type { AituBridge } from './index';\n\nconst AITU_DOMAIN_PARAM = '__aitu-domain'\n\nconst searchParams = new URLSearchParams(window.location.search)\n\nconst aituOrigin = searchParams.get(AITU_DOMAIN_PARAM)\n\ninterface WebBridge {\n    execute(method: keyof AituBridge, reqId: string, ...payload: any[] ): void\n    origin: string\n}\n\nlet WebBridge: WebBridge | null = null\n\nif (aituOrigin) {\n    WebBridge = {\n        origin: aituOrigin,\n        execute: (method, reqId, ...payload) => {\n            window.top.postMessage({\n                    source: 'aitu-bridge',\n                    method,\n                    reqId,\n                    payload: [...payload],\n                },\n                WebBridge.origin\n            )\n    }\n\n    }\n\n    window.addEventListener('message', event => {\n        if (event.origin === aituOrigin && event.data) {\n            window.dispatchEvent(new CustomEvent('aituEvents', { detail: event.data }));\n        }\n    })\n}\n\nexport default WebBridge\n","import { LIB_VERSION } from './version';\n\nimport {\n  promisifyMethod,\n  promisifyStorage,\n  promisifyInvoke,\n} from './utils'\n\n/* eslint-disable */\nconsole.log(\n    '%c'+new Date().toISOString().slice(11)+'%c LOCAL BRIDGE %c HELLO!',\n    'color: white; font-weight: bold; background: BlueViolet',\n    'color: magenta',\n    'color: lime',\n)\n\nimport WebBridge from './webBridge';\n\nenum EInvokeRequest {\n  getMe = 'GetMe',\n  getPhone = 'GetPhone',\n  getContacts = 'GetContacts',\n  getUserProfile = 'GetUserProfile',\n  enableNotifications = 'AllowNotifications',\n  disableNotifications = 'DisableNotifications'\n}\n\ntype SetItemType = (keyName: string, keyValue: string) => Promise<void>;\ntype GetItemType = (keyName: string) => Promise<string | null>;\ntype ClearType = () => Promise<void>;\n\ntype HeaderMenuItemClickHandlerType = (id: string) => Promise<void>;\ntype BackArrowClickHandlerType = () => Promise<void>;\n\ninterface GetPhoneResponse {\n  phone: string;\n  sign: string;\n}\n\ninterface GetMeResponse {\n  name: string;\n  lastname: string;\n  id: string;\n  avatar?: string;\n  avatarThumb?: string;\n  sign: string;\n}\n\ninterface ResponseObject {\n  phone?: string;\n  name?: string;\n  lastname?: string;\n}\n\ninterface GetGeoResponse {\n  latitude: number;\n  longitude: number;\n}\n\ninterface GetContactsResponse {\n  contacts: Array<{\n    first_name: string;\n    last_name: string;\n    phone: string;\n  }>;\n  sign: string;\n}\n\ninterface SelectContactResponse {\n  phone: string;\n  name: string;\n  lastname: string;\n}\n\ninterface GetUserProfileResponse {\n  name: string;\n  lastname?: string;\n  phone?: string;\n  avatar?: string;\n  avatarThumb?: string;\n}\n\nconst MAX_HEADER_MENU_ITEMS_COUNT = 3;\n\nexport enum HeaderMenuIcon {\n  Search = \"Search\",\n  ShoppingCart = \"ShoppingCart\",\n  Menu = \"Menu\",\n  Share = \"Share\",\n  Notifications = \"Notifications\",\n  Help = \"Help\",\n  Error = \"Error\",\n  Person = \"Person\",\n  Sort = \"Sort\",\n  Filter = \"Filter\"\n}\n\ninterface HeaderMenuItem {\n  id: string;\n  icon: HeaderMenuIcon;\n  badge?: string;\n}\n\ntype OpenSettingsResponse = 'success' | 'failed';\ntype ShareResponse = 'success' | 'failed';\ntype CopyToClipboardResponse = 'success' | 'failed';\ntype VibrateResponse = 'success' | 'failed';\n// todo: remove duplicates\ntype ResponseType = 'success' | 'failed';\n\ntype BridgeInvoke<T extends EInvokeRequest, R> = (method: T, data?: {}) => Promise<R>;\n\ninterface BridgeStorage {\n  setItem: SetItemType,\n  getItem: GetItemType,\n  clear: ClearType\n}\n\nexport interface AituBridge {\n  version: string;\n  invoke: BridgeInvoke<EInvokeRequest, ResponseObject>;\n  storage: BridgeStorage;\n  getMe: () => Promise<GetMeResponse>;\n  getPhone: () => Promise<GetPhoneResponse>;\n  getContacts: () => Promise<GetContactsResponse>;\n  getGeo: () => Promise<GetGeoResponse>;\n  selectContact: () => Promise<SelectContactResponse>;\n  getQr: () => Promise<string>;\n  getSMSCode: () => Promise<string>;\n  getUserProfile: (userId: string) => Promise<GetUserProfileResponse>;\n  share: (text: string) => Promise<ShareResponse>;\n  setTitle: (text: string) => Promise<ResponseType>;\n  copyToClipboard: (text: string) => Promise<CopyToClipboardResponse>;\n  shareImage: (text: string, image: string) => Promise<ShareResponse>;\n  shareFile: (text: string, filename: string, base64Data: string) => Promise<ShareResponse>;\n  enableNotifications: () => Promise<{}>;\n  disableNotifications: () => Promise<{}>;\n  openSettings: () => Promise<OpenSettingsResponse>;\n  closeApplication: () => Promise<ResponseType>;\n  setShakeHandler: (handler: any) => void;\n  setTabActiveHandler: (handler: (tabname: string) => void) => void;\n  vibrate: (pattern: number[]) => Promise<VibratePattern>;\n  isSupported: () => boolean;\n  supports: (method: string) => boolean;\n  sub: any;\n  enableScreenCapture: () => Promise<{}>;\n  disableScreenCapture: () => Promise<{}>;\n  setHeaderMenuItems: (items: Array<HeaderMenuItem>) => Promise<ResponseType>;\n  setHeaderMenuItemClickHandler: (handler: HeaderMenuItemClickHandlerType) => void;\n  setCustomBackArrowMode: (enabled: boolean) => Promise<ResponseType>;\n  getCustomBackArrowMode: () => Promise<boolean>;\n  setCustomBackArrowVisible: (visible: boolean) => Promise<ResponseType>;\n  setCustomBackArrowOnClickHandler: (handler: BackArrowClickHandlerType) => void;\n}\n\nconst invokeMethod = 'invoke';\nconst storageMethod = 'storage';\nconst getGeoMethod = 'getGeo';\nconst getQrMethod = 'getQr';\nconst getSMSCodeMethod = 'getSMSCode';\nconst selectContactMethod = 'selectContact';\nconst openSettingsMethod = 'openSettings';\nconst closeApplicationMethod = 'closeApplication';\nconst shareMethod = 'share';\nconst setTitleMethod = 'setTitle';\nconst copyToClipboardMethod = 'copyToClipboard';\nconst shareImageMethod = 'shareImage';\nconst shareFileMethod = 'shareFile';\nconst setShakeHandlerMethod = 'setShakeHandler';\nconst vibrateMethod = 'vibrate';\nconst enableScreenCaptureMethod = 'enableScreenCapture';\nconst disableScreenCaptureMethod = 'disableScreenCapture';\nconst setTabActiveHandlerMethod = 'setTabActiveHandler';\nconst setHeaderMenuItemsMethod = 'setHeaderMenuItems';\nconst setHeaderMenuItemClickHandlerMethod = 'setHeaderMenuItemClickHandler';\nconst setCustomBackArrowModeMethod = 'setCustomBackArrowMode';\nconst getCustomBackArrowModeMethod = 'getCustomBackArrowMode';\nconst setCustomBackArrowVisibleMethod = 'setCustomBackArrowVisible';\nconst setCustomBackArrowOnClickHandlerMethod = 'setCustomBackArrowOnClickHandler';\n\nconst android = typeof window !== 'undefined' && (window as any).AndroidBridge;\nconst ios = typeof window !== 'undefined' && (window as any).webkit && (window as any).webkit.messageHandlers;\nconst web = typeof window !== 'undefined' && (window.top !== window) && WebBridge;\n\nconst buildBridge = (): AituBridge => {\n  const subs = [];\n\n  if (typeof window !== 'undefined') {\n    window.addEventListener('aituEvents', (e: any) => {\n      [...subs].map((fn) => fn.call(null, e));\n    })\n  }\n\n  const invoke = (reqId, method, data = {}) => {\n    const isAndroid = android && android[invokeMethod];\n    const isIos = ios && ios[invokeMethod];\n\n    if (isAndroid) {\n      android[invokeMethod](reqId, method, JSON.stringify(data));\n    } else if (isIos) {\n      ios[invokeMethod].postMessage({ reqId, method, data });\n    } else if (web) {\n      web.execute(invokeMethod, reqId, method, data)\n    } else if (typeof window !== 'undefined') {\n      console.log('--invoke-isUnknown');\n    }\n  };\n\n  const storage = (reqId, method, data = {}) => {\n    const isAndroid = android && android[storageMethod];\n    const isIos = ios && ios[storageMethod];\n\n    if (isAndroid) {\n      android[storageMethod](reqId, method, JSON.stringify(data));\n    } else if (isIos) {\n      ios[storageMethod].postMessage({ reqId, method, data });\n    } else if (web) {\n      web.execute(storageMethod, reqId, method, data);\n    } else if (typeof window !== 'undefined') {\n      console.log('--storage-isUnknown');\n    }\n  }\n\n  const getGeo = (reqId) => {\n    const isAndroid = android && android[getGeoMethod];\n    const isIos = ios && ios[getGeoMethod];\n\n    if (isAndroid) {\n      android[getGeoMethod](reqId);\n    } else if (isIos) {\n      ios[getGeoMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(getGeoMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--getGeo-isUnknown');\n    }\n  }\n\n  const getQr = (reqId) => {\n    const isAndroid = android && android[getQrMethod];\n    const isIos = ios && ios[getQrMethod];\n\n    if (isAndroid) {\n      android[getQrMethod](reqId);\n    } else if (isIos) {\n      ios[getQrMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(getQrMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--getQr-isUnknown');\n    }\n  }\n\n  const getSMSCode = (reqId) => {\n    const isAndroid = android && android[getSMSCodeMethod];\n    const isIos = ios && ios[getSMSCodeMethod];\n\n    if (isAndroid) {\n      android[getSMSCodeMethod](reqId);\n    } else if (isIos) {\n      ios[getSMSCodeMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(getSMSCodeMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--getSMSCode-isUnknown');\n    }\n  }\n\n  const selectContact = (reqId) => {\n    const isAndroid = android && android[selectContactMethod];\n    const isIos = ios && ios[selectContactMethod];\n\n    if (isAndroid) {\n      android[selectContactMethod](reqId);\n    } else if (isIos) {\n      ios[selectContactMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(selectContactMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--selectContact-isUnknown');\n    }\n  }\n\n  const openSettings = (reqId) => {\n    const isAndroid = android && android[openSettingsMethod];\n    const isIos = ios && ios[openSettingsMethod];\n\n    if (isAndroid) {\n      android[openSettingsMethod](reqId);\n    } else if (isIos) {\n      ios[openSettingsMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(openSettingsMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--openSettings-isUnknown');\n    }\n  }\n\n  const closeApplication = (reqId) => {\n    const isAndroid = android && android[closeApplicationMethod];\n    const isIos = ios && ios[closeApplicationMethod];\n\n    if (isAndroid) {\n      android[closeApplicationMethod](reqId);\n    } else if (isIos) {\n      ios[closeApplicationMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(closeApplicationMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--closeApplication-isUnknown');\n    }\n  }\n\n  const share = (reqId, text) => {\n    const isAndroid = android && android[shareMethod];\n    const isIos = ios && ios[shareMethod];\n\n    if (isAndroid) {\n      android[shareMethod](reqId, text);\n    } else if (isIos) {\n      ios[shareMethod].postMessage({ reqId, text });\n    } else if (web) {\n      web.execute(shareMethod, reqId, text);\n    } else if (typeof window !== 'undefined') {\n      console.log('--share-isUnknown');\n    }\n  }\n\n  const setTitle = (reqId, text) => {\n    const isAndroid = android && android[setTitleMethod];\n    const isIos = ios && ios[setTitleMethod];\n\n    if (isAndroid) {\n      android[setTitleMethod](reqId, text);\n    } else if (isIos) {\n      ios[setTitleMethod].postMessage({ reqId, text });\n    } else if (web) {\n      web.execute(setTitleMethod, reqId, text);\n    } else if (typeof window !== 'undefined') {\n      console.log('--setTitle-isUnknown');\n    }\n  }\n\n  const copyToClipboard = (reqId, text) => {\n    const isAndroid = android && android[copyToClipboardMethod];\n    const isIos = ios && ios[copyToClipboardMethod];\n\n    if (isAndroid) {\n      android[copyToClipboardMethod](reqId, text);\n    } else if (isIos) {\n      ios[copyToClipboardMethod].postMessage({ reqId, text });\n    } else if (web) {\n      web.execute(copyToClipboardMethod, reqId, text);\n    } else if (typeof window !== 'undefined') {\n      console.log('--copyToClipboard-isUnknown');\n    }\n  }\n\n  const enableScreenCapture = (reqId) => {\n    const isAndroid = android && android[enableScreenCaptureMethod];\n    const isIos = ios && ios[enableScreenCaptureMethod];\n\n    if (isAndroid) {\n      android[enableScreenCaptureMethod](reqId);\n    } else if (isIos) {\n      ios[enableScreenCaptureMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(enableScreenCaptureMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--enableScreenCapture-isUnknown');\n    }\n  }\n\n  const disableScreenCapture = (reqId) => {\n    const isAndroid = android && android[disableScreenCaptureMethod];\n    const isIos = ios && ios[disableScreenCaptureMethod];\n\n    if (isAndroid) {\n      android[disableScreenCaptureMethod](reqId);\n    } else if (isIos) {\n      ios[disableScreenCaptureMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(disableScreenCaptureMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--disableScreenCapture-isUnknown');\n    }\n  }\n\n  const shareImage = (reqId, text, image) => {\n    // !!!======================!!!\n    // !!!===== Deprecated =====!!!\n    // !!!======================!!!\n\n    // const isAndroid = android && android[shareImageMethod];\n    // const isIos = ios && ios[shareImageMethod];\n\n    // if (isAndroid) {\n    //   android[shareImageMethod](reqId, text, image);\n    // } else if (isIos) {\n    //   ios[shareImageMethod].postMessage({ reqId, text, image });\n    // } else if (typeof window !== 'undefined') {\n    //   console.log('--shareImage-isWeb');\n    // }\n\n    // new one - fallback to shareFile\n    const isAndroid = android && android[shareFileMethod];\n    const isIos = ios && ios[shareFileMethod];\n\n    // get extension from base64 mime type and merge with name\n    const ext = image.split(';')[0].split('/')[1];\n    const filename = 'image.' + ext;\n    // remove mime type\n    const base64Data = image.substr(image.indexOf(',') + 1);\n\n    if (isAndroid) {\n      android[shareFileMethod](reqId, text, filename, base64Data);\n    } else if (isIos) {\n      ios[shareFileMethod].postMessage({ reqId, text, filename, base64Data });\n    } else if (web) {\n      web.execute(shareFileMethod, reqId, { text, filename, base64Data });\n    } else if (typeof window !== 'undefined') {\n      console.log('--shareFile-isUnknown');\n    }\n  }\n\n  const shareFile = (reqId, text, filename, base64Data) => {\n    const isAndroid = android && android[shareFileMethod];\n    const isIos = ios && ios[shareFileMethod];\n\n    if (isAndroid) {\n      android[shareFileMethod](reqId, text, filename, base64Data);\n    } else if (isIos) {\n      ios[shareFileMethod].postMessage({ reqId, text, filename, base64Data });\n    } else if (web) {\n      web.execute(shareFileMethod, reqId, text, filename, base64Data);\n    } else if (typeof window !== 'undefined') {\n      console.log('--shareFile-isUnknown');\n    }\n  }\n\n  const enableNotifications = () => invokePromise(EInvokeRequest.enableNotifications);\n\n  const disableNotifications = () => invokePromise(EInvokeRequest.disableNotifications);\n\n  const setShakeHandler = (handler) => {\n    const isAndroid = android && android[setShakeHandlerMethod];\n    const isIos = ios && ios[setShakeHandlerMethod];\n\n    if (isAndroid || isIos || web) {\n      (window as any).onAituBridgeShake = handler;\n    } else if (typeof window !== 'undefined') {\n      console.log('--setShakeHandler-isUnknown');\n    }\n  };\n\n  const setTabActiveHandler = (handler: (tabname: string) => void) => {\n    const isAndroid = android && android[setTabActiveHandlerMethod];\n    const isIos = ios && ios[setTabActiveHandlerMethod];\n\n    if (isAndroid || isIos || web) {\n      (window as any).onAituBridgeTabActive = handler;\n    } else if (typeof window !== 'undefined') {\n      console.log('--setTabActiveHandler-isUnknown');\n    }\n  };\n\n  const vibrate = (reqId, pattern) => {\n    if (\n      !Array.isArray(pattern) ||\n      pattern.some((timing) => timing < 1 || timing !== Math.floor(timing)) ||\n      pattern.reduce((total, timing) => total + timing) > 10000\n    ) {\n      console.error('Pattern should be an array of positive integers no longer than 10000ms total');\n      return;\n    }\n\n    const isAndroid = android && android[vibrateMethod];\n    const isIos = ios && ios[vibrateMethod];\n\n    if (isAndroid) {\n      android[vibrateMethod](reqId, JSON.stringify(pattern));\n    } else if (isIos) {\n      ios[vibrateMethod].postMessage({ reqId, pattern });\n    }  else if (web) {\n      web.execute(vibrateMethod, reqId, pattern);\n    } else if (typeof window !== 'undefined') {\n      console.log('--vibrate-isUnknown');\n    }\n  }\n\n  const isSupported = () => {\n    const iosSup = ios && (window as any).webkit.messageHandlers.invoke;\n    return Boolean(android || iosSup || web);\n  }\n\n  // TODO: implement web support\n  const supports = (method) =>\n    (android && typeof android[method] === 'function') ||\n    (ios && ios[method] && typeof ios[method].postMessage === 'function') ||\n    (web && typeof web[method] === 'function');\n\n  const sub = (listener: any) => {\n    subs.push(listener);\n  }\n\n  const setHeaderMenuItems = (reqId, items: Array<HeaderMenuItem>) => {\n    if (items.length > MAX_HEADER_MENU_ITEMS_COUNT) {\n      console.error('SetHeaderMenuItems: items count should not be more than ' + MAX_HEADER_MENU_ITEMS_COUNT);\n      return;\n    }\n\n    const isAndroid = android && android[setHeaderMenuItemsMethod];\n    const isIos = ios && ios[setHeaderMenuItemsMethod];\n\n    const itemsJsonArray = JSON.stringify(items);\n\n    if (isAndroid) {\n      android[setHeaderMenuItemsMethod](reqId, itemsJsonArray);\n    } else if (isIos) {\n      ios[setHeaderMenuItemsMethod].postMessage({ reqId, itemsJsonArray });\n    } else if (web) {\n      web.execute(setHeaderMenuItemsMethod, reqId, itemsJsonArray);\n    } else if (typeof window !== 'undefined') {\n      console.log('--setHeaderMenuItems-isUnknown');\n    }\n  }\n\n  const setHeaderMenuItemClickHandler = (handler: HeaderMenuItemClickHandlerType) => {\n    const isAndroid = android && android[setHeaderMenuItemClickHandlerMethod];\n    const isIos = ios && ios[setHeaderMenuItemClickHandlerMethod];\n\n    if (isAndroid || isIos || web) {\n      (window as any).onAituBridgeHeaderMenuItemClick = handler;\n    } else if (typeof window !== 'undefined') {\n      console.log('--setHeaderMenuItemClickHandler-isUnknown');\n    }\n  }\n\n  const setCustomBackArrowMode = (reqId, enabled: boolean) => {\n    const isAndroid = android && android[setCustomBackArrowModeMethod];\n    const isIos = ios && ios[setCustomBackArrowModeMethod];\n\n    if (isAndroid) {\n      android[setCustomBackArrowModeMethod](reqId, enabled);\n    } else if (isIos) {\n      ios[setCustomBackArrowModeMethod].postMessage({ reqId, enabled });\n    } else if (web) {\n      web.execute(setCustomBackArrowModeMethod, reqId, enabled);\n    } else if (typeof window !== 'undefined') {\n      console.log('--setCustomBackArrowMode-isUnknown');\n    }\n  }\n\n  const getCustomBackArrowMode = (reqId) => {\n    const isAndroid = android && android[getCustomBackArrowModeMethod];\n    const isIos = ios && ios[getCustomBackArrowModeMethod];\n\n    if (isAndroid) {\n      android[getCustomBackArrowModeMethod](reqId);\n    } else if (isIos) {\n      ios[getCustomBackArrowModeMethod].postMessage({ reqId });\n    } else if (web) {\n      web.execute(getCustomBackArrowModeMethod, reqId);\n    } else if (typeof window !== 'undefined') {\n      console.log('--getCustomBackArrowMode-isUnknown');\n    }\n  }\n\n  const setCustomBackArrowVisible = (reqId, visible: boolean) => {\n    const isAndroid = android && android[setCustomBackArrowVisibleMethod];\n    const isIos = ios && ios[setCustomBackArrowVisibleMethod];\n\n    if (isAndroid) {\n      android[setCustomBackArrowVisibleMethod](reqId, visible);\n    } else if (isIos) {\n      ios[setCustomBackArrowVisibleMethod].postMessage({ reqId, visible });\n    } else if (web) {\n      web.execute(setCustomBackArrowVisibleMethod, reqId, visible);\n    } else if (typeof window !== 'undefined') {\n      console.log('--setCustomBackArrowVisible-isUnknown');\n    }\n  }\n\n  const setCustomBackArrowOnClickHandler = (handler: BackArrowClickHandlerType) => {\n    const isAndroid = android && android[setCustomBackArrowOnClickHandlerMethod];\n    const isIos = ios && ios[setCustomBackArrowOnClickHandlerMethod];\n\n    if (isAndroid || isIos || web) {\n      (window as any).onAituBridgeBackArrowClick = handler;\n    } else if (typeof window !== 'undefined') {\n      console.log('--setCustomBackArrowOnClickHandler-isUnknown');\n    }\n  }\n\n  const invokePromise = promisifyInvoke(invoke, sub);\n  const storagePromise = promisifyStorage(storage, sub);\n  const getGeoPromise = promisifyMethod(getGeo, getGeoMethod, sub);\n  const getQrPromise = promisifyMethod(getQr, getQrMethod, sub);\n  const getSMSCodePromise = promisifyMethod(getSMSCode, getSMSCodeMethod, sub);\n  const selectContactPromise = promisifyMethod(selectContact, selectContactMethod, sub);\n  const openSettingsPromise = promisifyMethod(openSettings, openSettingsMethod, sub);\n  const closeApplicationPromise = promisifyMethod(closeApplication, closeApplicationMethod, sub);\n  const sharePromise = promisifyMethod(share, shareMethod, sub);\n  const setTitlePromise = promisifyMethod(setTitle, setTitleMethod, sub);\n  const copyToClipboardPromise = promisifyMethod(copyToClipboard, copyToClipboardMethod, sub);\n  const shareImagePromise = promisifyMethod(shareImage, shareImageMethod, sub);\n  const shareFilePromise = promisifyMethod(shareFile, shareFileMethod, sub);\n  const vibratePromise = promisifyMethod(vibrate, vibrateMethod, sub);\n  const enableScreenCapturePromise = promisifyMethod(enableScreenCapture, enableScreenCaptureMethod, sub);\n  const disableScreenCapturePromise = promisifyMethod(disableScreenCapture, disableScreenCaptureMethod, sub);\n  const setHeaderMenuItemsPromise = promisifyMethod(setHeaderMenuItems, setHeaderMenuItemsMethod, sub);\n  const setCustomBackArrowModePromise = promisifyMethod(setCustomBackArrowMode, setCustomBackArrowModeMethod, sub);\n  const getCustomBackArrowModePromise = promisifyMethod(getCustomBackArrowMode, getCustomBackArrowModeMethod, sub);\n  const setCustomBackArrowVisiblePromise = promisifyMethod(setCustomBackArrowVisible,setCustomBackArrowVisibleMethod, sub);\n\n  return {\n    version: String(LIB_VERSION),\n    copyToClipboard: copyToClipboardPromise,\n    invoke: invokePromise,\n    storage: storagePromise,\n    getMe: () => invokePromise(EInvokeRequest.getMe),\n    getPhone: () => invokePromise(EInvokeRequest.getPhone),\n    getContacts: () => invokePromise(EInvokeRequest.getContacts),\n    getGeo: getGeoPromise,\n    getQr: getQrPromise,\n    getSMSCode: getSMSCodePromise,\n    getUserProfile: (id: string) => invokePromise(EInvokeRequest.getUserProfile, { id }),\n    selectContact: selectContactPromise,\n    enableNotifications,\n    disableNotifications,\n    openSettings: openSettingsPromise,\n    closeApplication: closeApplicationPromise,\n    setTitle: setTitlePromise,\n    share: sharePromise,\n    shareImage: shareImagePromise,\n    shareFile: shareFilePromise,\n    setShakeHandler,\n    setTabActiveHandler,\n    vibrate: vibratePromise,\n    isSupported,\n    supports,\n    sub,\n    enableScreenCapture: enableScreenCapturePromise,\n    disableScreenCapture: disableScreenCapturePromise,\n    setHeaderMenuItems: setHeaderMenuItemsPromise,\n    setHeaderMenuItemClickHandler,\n    setCustomBackArrowMode: setCustomBackArrowModePromise,\n    getCustomBackArrowMode: getCustomBackArrowModePromise,\n    setCustomBackArrowVisible: setCustomBackArrowVisiblePromise,\n    setCustomBackArrowOnClickHandler,\n  }\n}\n\nconst bridge = buildBridge();\n\nexport default bridge;\n","export const LIB_VERSION = \"0.2.20\";\n"],"names":["createRequestResolver","prefix","counter","current","next","this","createCounter","promiseControllers","add","controller","customId","id","resolve","reqId","data","isSuccess","error","requestPromise","reject","handleSubscribe","subscribe","requestResolver","event","detail","promisifyMethod","method","methodName","Promise","aituOrigin","URLSearchParams","window","location","search","get","WebBridge","origin","execute","top","postMessage","source","payload","addEventListener","dispatchEvent","CustomEvent","EInvokeRequest","HeaderMenuIcon","log","Date","toISOString","slice","android","AndroidBridge","ios","webkit","messageHandlers","web","bridge","subs","e","map","fn","call","sub","listener","push","invokePromise","invokeMethodName","props","isIos","JSON","stringify","console","invoke","storagePromise","storage","setItem","keyName","keyValue","getItem","clear","promisifyStorage","getGeoPromise","getQrPromise","getSMSCodePromise","selectContactPromise","openSettingsPromise","closeApplicationPromise","sharePromise","text","setTitlePromise","copyToClipboardPromise","shareImagePromise","image","isAndroid","filename","split","base64Data","substr","indexOf","shareFilePromise","vibratePromise","pattern","Array","isArray","some","timing","Math","floor","reduce","total","enableScreenCapturePromise","disableScreenCapturePromise","setHeaderMenuItemsPromise","items","length","itemsJsonArray","setCustomBackArrowModePromise","enabled","getCustomBackArrowModePromise","setCustomBackArrowVisiblePromise","visible","version","String","copyToClipboard","getMe","getPhone","getContacts","getGeo","getQr","getSMSCode","getUserProfile","selectContact","enableNotifications","disableNotifications","openSettings","closeApplication","setTitle","share","shareImage","shareFile","setShakeHandler","handler","onAituBridgeShake","setTabActiveHandler","onAituBridgeTabActive","vibrate","isSupported","iosSup","Boolean","supports","enableScreenCapture","disableScreenCapture","setHeaderMenuItems","setHeaderMenuItemClickHandler","onAituBridgeHeaderMenuItemClick","setCustomBackArrowMode","getCustomBackArrowMode","setCustomBackArrowVisible","setCustomBackArrowOnClickHandler","onAituBridgeBackArrowClick","buildBridge"],"mappings":"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"}