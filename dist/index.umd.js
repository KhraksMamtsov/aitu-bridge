!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).aituBridge={})}(this,function(e){function n(e){var n=function(e){return void 0===e&&(e="m:"),{current:0,next:function(){return e+ ++this.current}}}(e),o={};return{add:function(e,t){void 0===t&&(t="");var i=t+n.next();return o[i]=e,i},resolve:function(e,n,t,i){var r=o[e];r&&(t(i)?r.resolve(n):r.reject(i),o[e]=null)}}}function o(e,n){e(function(e){if(e.detail&&"reqId"in e.detail){var o=e.detail,t=o.reqId;t&&n.resolve(t,o.data,function(e){return!e},o.error)}})}function t(e,t,i){var r=n(t+":");return o(i,r),function(){var n=arguments;return new Promise(function(o,t){var i=r.add({resolve:o,reject:t});e.apply(void 0,[i].concat([].slice.call(n)))})}}var i=new URLSearchParams(window.location.search).get("__aitu-domain"),r=null;i&&(r={origin:i,execute:function(e,n){window.top.postMessage({source:"aitu-bridge",method:e,reqId:n,payload:[].concat([].slice.call(arguments,2))},r.origin)}},window.addEventListener("message",function(e){e.origin===i&&e.data&&window.dispatchEvent(new CustomEvent("aituEvents",{detail:e.data}))}));var s,a,c=r;console.log("%c"+(new Date).toISOString().slice(11)+"%c LOCAL BRIDGE %c HELLO!","color: white; font-weight: bold; background: BlueViolet","color: magenta","color: lime"),function(e){e.getMe="GetMe",e.getPhone="GetPhone",e.getContacts="GetContacts",e.getUserProfile="GetUserProfile",e.enableNotifications="AllowNotifications",e.disableNotifications="DisableNotifications"}(s||(s={})),(a=e.HeaderMenuIcon||(e.HeaderMenuIcon={})).Search="Search",a.ShoppingCart="ShoppingCart",a.Menu="Menu",a.Share="Share",a.Notifications="Notifications",a.Help="Help",a.Error="Error",a.Person="Person",a.Sort="Sort",a.Filter="Filter";var d="undefined"!=typeof window&&window.AndroidBridge,l="undefined"!=typeof window&&window.webkit&&window.webkit.messageHandlers,u="undefined"!=typeof window&&window.top!==window&&c,f=function(){var e=[];"undefined"!=typeof window&&window.addEventListener("aituEvents",function(n){[].concat(e).map(function(e){return e.call(null,n)})});var i,r=function(n){e.push(n)},a=(o(r,i=n("invoke:")),function(e,n){return void 0===n&&(n={}),new Promise(function(o,t){!function(e,n,o){void 0===o&&(o={});var t=l&&l.invoke;d&&d.invoke?d.invoke(e,n,JSON.stringify(o)):t?l.invoke.postMessage({reqId:e,method:n,data:o}):u?u.execute("invoke",e,n,o):"undefined"!=typeof window&&console.log("--invoke-isUnknown")}(i.add({resolve:o,reject:t},e+":"),e,n)})}),c=function(e,t){var i=n("storage:");return o(t,i),{setItem:function(n,o){return new Promise(function(t,r){var s=i.add({resolve:t,reject:r});e(s,"setItem",{keyName:n,keyValue:o})})},getItem:function(n){return new Promise(function(o,t){var r=i.add({resolve:o,reject:t});e(r,"getItem",{keyName:n})})},clear:function(){return new Promise(function(n,o){var t=i.add({resolve:n,reject:o});e(t,"clear",{})})}}}(function(e,n,o){void 0===o&&(o={});var t=l&&l.storage;d&&d.storage?d.storage(e,n,JSON.stringify(o)):t?l.storage.postMessage({reqId:e,method:n,data:o}):u?u.execute("storage",e,n,o):"undefined"!=typeof window&&console.log("--storage-isUnknown")},r),f=t(function(e){var n=l&&l.getGeo;d&&d.getGeo?d.getGeo(e):n?l.getGeo.postMessage({reqId:e}):u?u.execute("getGeo",e):"undefined"!=typeof window&&console.log("--getGeo-isUnknown")},"getGeo",r),w=t(function(e){var n=l&&l.getQr;d&&d.getQr?d.getQr(e):n?l.getQr.postMessage({reqId:e}):u?u.execute("getQr",e):"undefined"!=typeof window&&console.log("--getQr-isUnknown")},"getQr",r),g=t(function(e){var n=l&&l.getSMSCode;d&&d.getSMSCode?d.getSMSCode(e):n?l.getSMSCode.postMessage({reqId:e}):u?u.execute("getSMSCode",e):"undefined"!=typeof window&&console.log("--getSMSCode-isUnknown")},"getSMSCode",r),p=t(function(e){var n=l&&l.selectContact;d&&d.selectContact?d.selectContact(e):n?l.selectContact.postMessage({reqId:e}):u?u.execute("selectContact",e):"undefined"!=typeof window&&console.log("--selectContact-isUnknown")},"selectContact",r),C=t(function(e){var n=l&&l.openSettings;d&&d.openSettings?d.openSettings(e):n?l.openSettings.postMessage({reqId:e}):u?u.execute("openSettings",e):"undefined"!=typeof window&&console.log("--openSettings-isUnknown")},"openSettings",r),k=t(function(e){var n=l&&l.closeApplication;d&&d.closeApplication?d.closeApplication(e):n?l.closeApplication.postMessage({reqId:e}):u?u.execute("closeApplication",e):"undefined"!=typeof window&&console.log("--closeApplication-isUnknown")},"closeApplication",r),v=t(function(e,n){var o=l&&l.share;d&&d.share?d.share(e,n):o?l.share.postMessage({reqId:e,text:n}):u?u.execute("share",e,n):"undefined"!=typeof window&&console.log("--share-isUnknown")},"share",r),m=t(function(e,n){var o=l&&l.setTitle;d&&d.setTitle?d.setTitle(e,n):o?l.setTitle.postMessage({reqId:e,text:n}):u?u.execute("setTitle",e,n):"undefined"!=typeof window&&console.log("--setTitle-isUnknown")},"setTitle",r),M=t(function(e,n){var o=l&&l.copyToClipboard;d&&d.copyToClipboard?d.copyToClipboard(e,n):o?l.copyToClipboard.postMessage({reqId:e,text:n}):u?u.execute("copyToClipboard",e,n):"undefined"!=typeof window&&console.log("--copyToClipboard-isUnknown")},"copyToClipboard",r),b=t(function(e,n,o){var t=d&&d.shareFile,i=l&&l.shareFile,r="image."+o.split(";")[0].split("/")[1],s=o.substr(o.indexOf(",")+1);t?d.shareFile(e,n,r,s):i?l.shareFile.postMessage({reqId:e,text:n,filename:r,base64Data:s}):u?u.execute("shareFile",e,{text:n,filename:r,base64Data:s}):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},"shareImage",r),S=t(function(e,n,o,t){var i=l&&l.shareFile;d&&d.shareFile?d.shareFile(e,n,o,t):i?l.shareFile.postMessage({reqId:e,text:n,filename:o,base64Data:t}):u?u.execute("shareFile",e,n,o,t):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},"shareFile",r),h=t(function(e,n){if(!Array.isArray(n)||n.some(function(e){return e<1||e!==Math.floor(e)})||n.reduce(function(e,n){return e+n})>1e4)console.error("Pattern should be an array of positive integers no longer than 10000ms total");else{var o=l&&l.vibrate;d&&d.vibrate?d.vibrate(e,JSON.stringify(n)):o?l.vibrate.postMessage({reqId:e,pattern:n}):u?u.execute("vibrate",e,n):"undefined"!=typeof window&&console.log("--vibrate-isUnknown")}},"vibrate",r),y=t(function(e){var n=l&&l.enableScreenCapture;d&&d.enableScreenCapture?d.enableScreenCapture(e):n?l.enableScreenCapture.postMessage({reqId:e}):u?u.execute("enableScreenCapture",e):"undefined"!=typeof window&&console.log("--enableScreenCapture-isUnknown")},"enableScreenCapture",r),A=t(function(e){var n=l&&l.disableScreenCapture;d&&d.disableScreenCapture?d.disableScreenCapture(e):n?l.disableScreenCapture.postMessage({reqId:e}):u?u.execute("disableScreenCapture",e):"undefined"!=typeof window&&console.log("--disableScreenCapture-isUnknown")},"disableScreenCapture",r),I=t(function(e,n){if(n.length>3)console.error("SetHeaderMenuItems: items count should not be more than 3");else{var o=d&&d.setHeaderMenuItems,t=l&&l.setHeaderMenuItems,i=JSON.stringify(n);o?d.setHeaderMenuItems(e,i):t?l.setHeaderMenuItems.postMessage({reqId:e,itemsJsonArray:i}):u?u.execute("setHeaderMenuItems",e,i):"undefined"!=typeof window&&console.log("--setHeaderMenuItems-isUnknown")}},"setHeaderMenuItems",r),B=t(function(e,n){var o=l&&l.setCustomBackArrowMode;d&&d.setCustomBackArrowMode?d.setCustomBackArrowMode(e,n):o?l.setCustomBackArrowMode.postMessage({reqId:e,enabled:n}):u?u.execute("setCustomBackArrowMode",e,n):"undefined"!=typeof window&&console.log("--setCustomBackArrowMode-isUnknown")},"setCustomBackArrowMode",r),H=t(function(e){var n=l&&l.getCustomBackArrowMode;d&&d.getCustomBackArrowMode?d.getCustomBackArrowMode(e):n?l.getCustomBackArrowMode.postMessage({reqId:e}):u?u.execute("getCustomBackArrowMode",e):"undefined"!=typeof window&&console.log("--getCustomBackArrowMode-isUnknown")},"getCustomBackArrowMode",r),x=t(function(e,n){var o=l&&l.setCustomBackArrowVisible;d&&d.setCustomBackArrowVisible?d.setCustomBackArrowVisible(e,n):o?l.setCustomBackArrowVisible.postMessage({reqId:e,visible:n}):u?u.execute("setCustomBackArrowVisible",e,n):"undefined"!=typeof window&&console.log("--setCustomBackArrowVisible-isUnknown")},"setCustomBackArrowVisible",r);return{version:String("0.2.20"),copyToClipboard:M,invoke:a,storage:c,getMe:function(){return a(s.getMe)},getPhone:function(){return a(s.getPhone)},getContacts:function(){return a(s.getContacts)},getGeo:f,getQr:w,getSMSCode:g,getUserProfile:function(e){return a(s.getUserProfile,{id:e})},selectContact:p,enableNotifications:function(){return a(s.enableNotifications)},disableNotifications:function(){return a(s.disableNotifications)},openSettings:C,closeApplication:k,setTitle:m,share:v,shareImage:b,shareFile:S,setShakeHandler:function(e){d&&d.setShakeHandler||l&&l.setShakeHandler||u?window.onAituBridgeShake=e:"undefined"!=typeof window&&console.log("--setShakeHandler-isUnknown")},setTabActiveHandler:function(e){d&&d.setTabActiveHandler||l&&l.setTabActiveHandler||u?window.onAituBridgeTabActive=e:"undefined"!=typeof window&&console.log("--setTabActiveHandler-isUnknown")},vibrate:h,isSupported:function(){var e=l&&window.webkit.messageHandlers.invoke;return Boolean(d||e||u)},supports:function(e){return d&&"function"==typeof d[e]||l&&l[e]&&"function"==typeof l[e].postMessage||u&&"function"==typeof u[e]},sub:r,enableScreenCapture:y,disableScreenCapture:A,setHeaderMenuItems:I,setHeaderMenuItemClickHandler:function(e){d&&d.setHeaderMenuItemClickHandler||l&&l.setHeaderMenuItemClickHandler||u?window.onAituBridgeHeaderMenuItemClick=e:"undefined"!=typeof window&&console.log("--setHeaderMenuItemClickHandler-isUnknown")},setCustomBackArrowMode:B,getCustomBackArrowMode:H,setCustomBackArrowVisible:x,setCustomBackArrowOnClickHandler:function(e){d&&d.setCustomBackArrowOnClickHandler||l&&l.setCustomBackArrowOnClickHandler||u?window.onAituBridgeBackArrowClick=e:"undefined"!=typeof window&&console.log("--setCustomBackArrowOnClickHandler-isUnknown")}}}();e.default=f});
//# sourceMappingURL=index.umd.js.map
