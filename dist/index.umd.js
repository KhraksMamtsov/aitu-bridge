!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).aituBridge={})}(this,function(e){function n(e,n){var t,o,r=(t={current:0,next:function(){return++this.current}},o={},{add:function(e,n){var r=null!=n?n:t.next();return o[r]=e,r},resolve:function(e,n,t,r){var i=o[e];i&&(t(r)?i.resolve(n):i.reject(r),o[e]=null)}});return n(function(e){if(e.detail&&"reqId"in e.detail){var n=e.detail,t=n.reqId;t&&r.resolve(t,n.data,function(e){return!e},n.error)}}),function(){var n=arguments;return new Promise(function(t,o){var i=r.add({resolve:t,reject:o});e.apply(void 0,[i].concat([].slice.call(n)))})}}var t=new URLSearchParams(window.location.search).get("__aitu-domain"),o=null;t&&(o={origin:t,execute:function(e,n){window.top.postMessage({source:"aitu-bridge",method:e,reqId:n,payload:[].slice.call(arguments,2)},o.origin)}},window.addEventListener("message",function(e){e.origin===t&&e.data&&window.dispatchEvent(new CustomEvent("aituEvents",{detail:e.data}))}));var r,i,s=o;!function(e){e.getMe="GetMe",e.getPhone="GetPhone",e.getContacts="GetContacts",e.getUserProfile="GetUserProfile",e.enableNotifications="AllowNotifications",e.disableNotifications="DisableNotifications"}(r||(r={})),(i=e.HeaderMenuIcon||(e.HeaderMenuIcon={})).Search="Search",i.ShoppingCart="ShoppingCart",i.Menu="Menu",i.Share="Share",i.Notifications="Notifications",i.Help="Help",i.Error="Error",i.Person="Person",i.Sort="Sort",i.Filter="Filter";var a="undefined"!=typeof window&&window.AndroidBridge,d="undefined"!=typeof window&&window.webkit&&window.webkit.messageHandlers,c="undefined"!=typeof window&&window.top!==window&&s,u=function(){var e=[];"undefined"!=typeof window&&window.addEventListener("aituEvents",function(n){[].concat(e).map(function(e){return e.call(null,n)})});var t,o,i,s=function(n){e.push(n)},u=(t={current:0,next:function(){return++this.current}},o={},i={add:function(e,n){var r=null!=n?n:t.next();return o[r]=e,r},resolve:function(e,n,t,r){var i=o[e];i&&(t(r)?i.resolve(n):i.reject(r),o[e]=null)}},s(function(e){if(e.detail&&"reqId"in e.detail){var n=e.detail,t=n.reqId;t&&i.resolve(t,n.data,function(e){return!e},n.error)}}),function(e,n){return void 0===n&&(n={}),new Promise(function(t,o){!function(e,n,t){void 0===t&&(t={});var o=d&&d.invoke;a&&a.invoke?a.invoke(e,n,JSON.stringify(t)):o?d.invoke.postMessage({reqId:e,method:n,data:t}):c?c.execute("invoke",e,t):"undefined"!=typeof window&&console.log("--invoke-isUnknown")}(i.add({resolve:t,reject:o},n.reqId),e,n)})}),l=function(e,n){var t,o,r=(t={current:0,next:function(){return++this.current}},o={},{add:function(e,n){var r="s"+(null!=n?n:t.next());return o[r]=e,r},resolve:function(e,n,t,r){var i=o[e];i&&(t(r)?i.resolve(n):i.reject(r),o[e]=null)}});return n(function(e){if(e.detail&&"reqId"in e.detail){var n=e.detail,t=n.reqId;t&&r.resolve(t,n.data,function(e){return!e},n.error)}}),{setItem:function(n,t){return new Promise(function(o,i){var s=r.add({resolve:o,reject:i});e(s,"setItem",{keyName:n,keyValue:t})})},getItem:function(n){return new Promise(function(t,o){var i=r.add({resolve:t,reject:o});e(i,"getItem",{keyName:n})})},clear:function(){return new Promise(function(n,t){var o=r.add({resolve:n,reject:t});e(o,"clear",{})})}}}(function(e,n,t){void 0===t&&(t={});var o=d&&d.storage;a&&a.storage?a.storage(e,n,JSON.stringify(t)):o?d.storage.postMessage({reqId:e,method:n,data:t}):c?c.execute("storage",e,{method:n,data:t}):"undefined"!=typeof window&&console.log("--storage-isUnknown")},s),f=n(function(e){var n=d&&d.getGeo;a&&a.getGeo?a.getGeo(e):n?d.getGeo.postMessage({reqId:e}):c?c.execute("getGeo",e):"undefined"!=typeof window&&console.log("--getGeo-isUnknown")},s),w=n(function(e){var n=d&&d.getQr;a&&a.getQr?a.getQr(e):n?d.getQr.postMessage({reqId:e}):c?c.execute("getQr",e):"undefined"!=typeof window&&console.log("--getQr-isUnknown")},s),p=n(function(e){var n=d&&d.getSMSCode;a&&a.getSMSCode?a.getSMSCode(e):n?d.getSMSCode.postMessage({reqId:e}):c?c.execute("getSMSCode",e):"undefined"!=typeof window&&console.log("--getSMSCode-isUnknown")},s),g=n(function(e){var n=d&&d.selectContact;a&&a.selectContact?a.selectContact(e):n?d.selectContact.postMessage({reqId:e}):c?c.execute("selectContact",e):"undefined"!=typeof window&&console.log("--selectContact-isUnknown")},s),v=n(function(e){var n=d&&d.openSettings;a&&a.openSettings?a.openSettings(e):n?d.openSettings.postMessage({reqId:e}):c?c.execute("openSettings",e):"undefined"!=typeof window&&console.log("--openSettings-isUnknown")},s),k=n(function(e){var n=d&&d.closeApplication;a&&a.closeApplication?a.closeApplication(e):n?d.closeApplication.postMessage({reqId:e}):c?c.execute("closeApplication",e):"undefined"!=typeof window&&console.log("--closeApplication-isUnknown")},s),C=n(function(e,n){var t=d&&d.share;a&&a.share?a.share(e,n):t?d.share.postMessage({reqId:e,text:n}):c?c.execute("share",e,{text:n}):"undefined"!=typeof window&&console.log("--share-isUnknown")},s),m=n(function(e,n){var t=d&&d.setTitle;a&&a.setTitle?a.setTitle(e,n):t?d.setTitle.postMessage({reqId:e,text:n}):c?c.execute("setTitle",e,{text:n}):"undefined"!=typeof window&&console.log("--setTitle-isUnknown")},s),M=n(function(e,n){var t=d&&d.copyToClipboard;a&&a.copyToClipboard?a.copyToClipboard(e,n):t?d.copyToClipboard.postMessage({reqId:e,text:n}):c?c.execute("copyToClipboard",e,{text:n}):"undefined"!=typeof window&&console.log("--copyToClipboard-isUnknown")},s),b=n(function(e,n,t){var o=a&&a.shareFile,r=d&&d.shareFile,i="image."+t.split(";")[0].split("/")[1],s=t.substr(t.indexOf(",")+1);o?a.shareFile(e,n,i,s):r?d.shareFile.postMessage({reqId:e,text:n,filename:i,base64Data:s}):c?c.execute("shareFile",e,{text:n,filename:i,base64Data:s}):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},s),S=n(function(e,n,t,o){var r=d&&d.shareFile;a&&a.shareFile?a.shareFile(e,n,t,o):r?d.shareFile.postMessage({reqId:e,text:n,filename:t,base64Data:o}):c?c.execute("shareFile",e,{text:n,filename:t,base64Data:o}):"undefined"!=typeof window&&console.log("--shareFile-isUnknown")},s),y=n(function(e,n){if(!Array.isArray(n)||n.some(function(e){return e<1||e!==Math.floor(e)})||n.reduce(function(e,n){return e+n})>1e4)console.error("Pattern should be an array of positive integers no longer than 10000ms total");else{var t=d&&d.vibrate;a&&a.vibrate?a.vibrate(e,JSON.stringify(n)):t?d.vibrate.postMessage({reqId:e,pattern:n}):c?c.execute("vibrate",e,{pattern:n}):"undefined"!=typeof window&&console.log("--vibrate-isUnknown")}},s),h=n(function(e){var n=d&&d.enableScreenCapture;a&&a.enableScreenCapture?a.enableScreenCapture(e):n?d.enableScreenCapture.postMessage({reqId:e}):c?c.execute("enableScreenCapture",e):"undefined"!=typeof window&&console.log("--enableScreenCapture-isUnknown")},s),A=n(function(e){var n=d&&d.disableScreenCapture;a&&a.disableScreenCapture?a.disableScreenCapture(e):n?d.disableScreenCapture.postMessage({reqId:e}):c?c.execute("disableScreenCapture",e):"undefined"!=typeof window&&console.log("--disableScreenCapture-isUnknown")},s),I=n(function(e,n){if(n.length>3)console.error("SetHeaderMenuItems: items count should not be more than 3");else{var t=a&&a.setHeaderMenuItems,o=d&&d.setHeaderMenuItems,r=JSON.stringify(n);t?a.setHeaderMenuItems(e,r):o?d.setHeaderMenuItems.postMessage({reqId:e,itemsJsonArray:r}):c?c.execute("setHeaderMenuItems",e,{itemsJsonArray:r}):"undefined"!=typeof window&&console.log("--setHeaderMenuItems-isUnknown")}},s),x=n(function(e,n){var t=d&&d.setCustomBackArrowMode;a&&a.setCustomBackArrowMode?a.setCustomBackArrowMode(e,n):t?d.setCustomBackArrowMode.postMessage({reqId:e,enabled:n}):c?c.execute("setCustomBackArrowMode",e,{enabled:n}):"undefined"!=typeof window&&console.log("--setCustomBackArrowMode-isUnknown")},s),H=n(function(e){var n=d&&d.getCustomBackArrowMode;a&&a.getCustomBackArrowMode?a.getCustomBackArrowMode(e):n?d.getCustomBackArrowMode.postMessage({reqId:e}):c?c.execute("getCustomBackArrowMode",e):"undefined"!=typeof window&&console.log("--getCustomBackArrowMode-isUnknown")},s),B=n(function(e,n){var t=d&&d.setCustomBackArrowVisible;a&&a.setCustomBackArrowVisible?a.setCustomBackArrowVisible(e,n):t?d.setCustomBackArrowVisible.postMessage({reqId:e,visible:n}):c?c.execute("setCustomBackArrowVisible",e,{visible:n}):"undefined"!=typeof window&&console.log("--setCustomBackArrowVisible-isUnknown")},s);return{version:String("0.2.20"),copyToClipboard:M,invoke:u,storage:l,getMe:function(){return u(r.getMe)},getPhone:function(){return u(r.getPhone)},getContacts:function(){return u(r.getContacts)},getGeo:f,getQr:w,getSMSCode:p,getUserProfile:function(e){return u(r.getUserProfile,{id:e})},selectContact:g,enableNotifications:function(){return u(r.enableNotifications)},disableNotifications:function(){return u(r.disableNotifications)},openSettings:v,closeApplication:k,setTitle:m,share:C,shareImage:b,shareFile:S,setShakeHandler:function(e){a&&a.setShakeHandler||d&&d.setShakeHandler||c?window.onAituBridgeShake=e:"undefined"!=typeof window&&console.log("--setShakeHandler-isUnknown")},setTabActiveHandler:function(e){a&&a.setTabActiveHandler||d&&d.setTabActiveHandler||c?window.onAituBridgeTabActive=e:"undefined"!=typeof window&&console.log("--setTabActiveHandler-isUnknown")},vibrate:y,isSupported:function(){var e=d&&window.webkit.messageHandlers.invoke;return Boolean(a||e||c)},supports:function(e){return a&&"function"==typeof a[e]||d&&d[e]&&"function"==typeof d[e].postMessage||c&&"function"==typeof c[e]},sub:s,enableScreenCapture:h,disableScreenCapture:A,setHeaderMenuItems:I,setHeaderMenuItemClickHandler:function(e){a&&a.setHeaderMenuItemClickHandler||d&&d.setHeaderMenuItemClickHandler||c?window.onAituBridgeHeaderMenuItemClick=e:"undefined"!=typeof window&&console.log("--setHeaderMenuItemClickHandler-isUnknown")},setCustomBackArrowMode:x,getCustomBackArrowMode:H,setCustomBackArrowVisible:B,setCustomBackArrowOnClickHandler:function(e){a&&a.setCustomBackArrowOnClickHandler||d&&d.setCustomBackArrowOnClickHandler||c?window.onAituBridgeBackArrowClick=e:"undefined"!=typeof window&&console.log("--setCustomBackArrowOnClickHandler-isUnknown")}}}();e.default=u});
//# sourceMappingURL=index.umd.js.map
